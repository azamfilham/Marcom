@model Marcom.ViewModel.T_SouvenirViewModel


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">

        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.Id)

        <div class="form-group">
            @Html.LabelFor(model => model.Code, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Code, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.Code, "", new { @class = "text-danger" })
            </div>
        </div>


        <div class="form-group">
            @Html.LabelFor(model => model.ReceivedBy, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.EmployeeName, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.ReceivedBy, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.ReceivedDate, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.ReceivedDate, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.ReceivedDate, "", new { @class = "text-danger" })
            </div>
        </div>


        <div class="form-group">
            @Html.LabelFor(model => model.Note, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextAreaFor(model => model.Note, new { @class = "form-control", @readonly = "readonly" })
                @Html.ValidationMessageFor(model => model.Note, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12">
                
                <br />

                <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>Souvenir Name</th>
                            <th>Qty</th>
                            <th>Note</th>
                            
                        </tr>
                    </thead>

                    <tbody id="souvenir-list"></tbody>

                    <tfoot>

                    </tfoot>
                </table>

            </div>
        </div>


        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <button type="button" id="btn-close" class="btn btn-default btn-info pull-right">
                    Close
                </button>
            </div>
        </div>
    </div>
}

@Scripts.Render("~/bundles/jqueryval")

<script>

    $(document).ready(function () {
        
        SelectItem();

    })

    $(".datepicker").datepicker({
        format: 'dd M yyyy',

    })


    $("#btn-close").click(function () {
        $("#modal-Form").modal("hide");
            })


    function GetListSouvItem(data) {
        var table = "<tr>";
        table += "<th><input class='form-control col-md-6 u_SouvenirId' id='u_SouvenirId' name='u_SouvenirId' readonly='readonly'  value='"+data.SouvenirName+"' /></th> <th><input class='form-control col-md-6' id='qty' name='qty' readonly='readonly' placeholder='Qty' type='number' value='"+data.Qty+"' /></th> <th><input class='form-control col-md-6' id='note' name='note' readonly='readonly' placeholder='Note' value='"+data.Note+"' /></th>";
        
        table += "</tr>";

        return table;
    }




    function SelectItem() {
        var id = @Model.Id;
        //alert(id);

        $.ajax({
            url: "http://localhost:50876/api/T_SouvenirItems/TSouvId/" + id,
            type: 'get',
            data: 'json',
            success: function (result) {
                
                $.each(result, function (i, item) {
                    var tr = GetListSouvItem(item);
                    $("#souvenir-list").append(tr);  //memasukkan TR ke itemlist
                })


            },
            error: function(err) {
                alert(err);
            }
        })

    }


</script>